
@model Pyme.Abstracciones.ModelosParaUI.ProductoDto
@{
    ViewBag.Title = "Nuevo Producto";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var categorias = ViewBag.Categorias as SelectList; // opcional
}

<div class="max-w-2xl mx-auto bg-[color:var(--light-panel)] border border-[color:var(--border)] rounded-2xl shadow-sm p-8 mt-10">
    <h1 class="text-2xl font-bold text-[color:var(--txt-primary)] mb-6 flex items-center gap-2">
        <i data-lucide="package-plus" class="w-6 h-6 text-[color:var(--primary)]"></i>
        Nuevo Producto
    </h1>

    @using (Html.BeginForm("CrearProducto", "Producto", FormMethod.Post, new { @class = "space-y-6" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true, "", new { @class = "text-[color:var(--error)] text-sm" })
        @Scripts.Render("~/bundles/jqueryval")

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            <div>
                @Html.LabelFor(m => m.Nombre, htmlAttributes: new { @class = "block text-sm font-medium text-[color:var(--txt-secondary)] mb-2" })
                @Html.TextBoxFor(m => m.Nombre, new { @class = "w-full border border-[color:var(--border)] rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-[color:var(--primary)]", placeholder = "Nombre del producto", maxlength = 120 })
                @Html.ValidationMessageFor(m => m.Nombre, "", new { @class = "text-[color:var(--error)] text-sm" })
            </div>

            <div>
                @Html.LabelFor(m => m.CategoriaId, htmlAttributes: new { @class = "block text-sm font-medium text-[color:var(--txt-secondary)] mb-2" })
                @if (categorias != null)
                {
                    @Html.DropDownListFor(m => m.CategoriaId, categorias, "-- Seleccione --", new { @class = "w-full border border-[color:var(--border)] rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-[color:var(--primary)]" })
                }
                else
                {
                    @Html.TextBoxFor(m => m.CategoriaId, new { @class = "w-full border border-[color:var(--border)] rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-[color:var(--primary)]", type = "number", min = "1", placeholder = "Id de categoría" })
                }
                @Html.ValidationMessageFor(m => m.CategoriaId, "", new { @class = "text-[color:var(--error)] text-sm" })
            </div>

            <div>
                @Html.LabelFor(m => m.Precio, htmlAttributes: new { @class = "block text-sm font-medium text-[color:var(--txt-secondary)] mb-2" })
                @Html.TextBoxFor(m => m.Precio, new { @class = "w-full border border-[color:var(--border)] rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-[color:var(--primary)]", type = "number", step = "0.01", min = "0", placeholder = "0.00" })
                @Html.ValidationMessageFor(m => m.Precio, "", new { @class = "text-[color:var(--error)] text-sm" })
            </div>

            <div>
                @Html.LabelFor(m => m.ImpuestoPorc, htmlAttributes: new { @class = "block text-sm font-medium text-[color:var(--txt-secondary)] mb-2" })
                @Html.TextBoxFor(m => m.ImpuestoPorc, new { @class = "w-full border border-[color:var(--border)] rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-[color:var(--primary)]", type = "number", step = "0.01", min = "0", max = "100", placeholder = "%" })
                @Html.ValidationMessageFor(m => m.ImpuestoPorc, "", new { @class = "text-[color:var(--error)] text-sm" })
            </div>

            <div>
                @Html.LabelFor(m => m.Stock, htmlAttributes: new { @class = "block text-sm font-medium text-[color:var(--txt-secondary)] mb-2" })
                @Html.TextBoxFor(m => m.Stock, new { @class = "w-full border border-[color:var(--border)] rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-[color:var(--primary)]", type = "number", min = "0", placeholder = "Cantidad disponible" })
                @Html.ValidationMessageFor(m => m.Stock, "", new { @class = "text-[color:var(--error)] text-sm" })
            </div>

            <div class="sm:col-span-2">
                @Html.LabelFor(m => m.ImagenUrl, htmlAttributes: new { @class = "block text-sm font-medium text-[color:var(--txt-secondary)] mb-2" })
                @Html.TextBoxFor(m => m.ImagenUrl, new { @class = "w-full border border-[color:var(--border)] rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-[color:var(--primary)]", type = "url", maxlength = 400, placeholder = "https://..." })
                @Html.ValidationMessageFor(m => m.ImagenUrl, "", new { @class = "text-[color:var(--error)] text-sm" })
            </div>

            <div class="sm:col-span-2">
                <label class="inline-flex items-center gap-2">
                    @Html.CheckBoxFor(m => m.EstadoProducto)
                    <span>@Html.DisplayNameFor(m => m.EstadoProducto)</span>
                </label>
                @Html.ValidationMessageFor(m => m.EstadoProducto, "", new { @class = "text-[color:var(--error)] text-sm" })
            </div>
        </div>

        <div class="mt-8 flex justify-end gap-4">
            @Html.ActionLink("Cancelar", "ListarProducto", "Producto", null, new { @class = "px-5 py-2.5 border border-[color:var(--border)] text-[color:var(--txt-secondary)] rounded-xl hover:bg-[color:var(--light-bg)] transition-colors" })
            <button type="submit" class="px-5 py-2.5 bg-[color:var(--primary)] text-white font-medium rounded-xl hover:bg-[color:var(--primary-dark)] transition-colors flex items-center gap-2">
                <i data-lucide="save" class="w-5 h-5"></i> Guardar
            </button>
        </div>
    }
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
